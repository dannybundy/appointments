{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load employee_template_tags %}
{% load static %}


<head>
	{% block title %}Schedule an appointment{% endblock title %}
</head>

<body>
	{% block schedule %}active{% endblock %}
	{% block schedule_no_js %}active{% endblock %}

	<noscript>
		<meta HTTP-EQUIV="REFRESH" content="0; url={% url 'employee:home' %}">
	</noscript>

	{% block body %}
		{% if refresh %}
			<meta HTTP-EQUIV="REFRESH" content="0; url={% url 'employee:schedule' %}">
		{% endif %}

		<h3 align="center">Schedule an appointment</h3>
		<hr>
		
		<form method="POST" id="appt-form" class="center mw-600">
			{% csrf_token %}

			<center>
				<div id="service-list" class="row mb-4">
					{% for service in service_list %}
						<div class="col" align="center">
							<input type="checkbox" class="mb-2 service-checkbox" id="{{service.pk}}">{{service.name}}</input>
						</div>
					{% endfor %}
				</div>
			</center>
			<hr>

			<div id="employee-list" class="row mb-4">
				{% for employee in employee_list %}
					<div class="col" align="center">
						<input type="checkbox" class="mb-2 connected-checkbox employee" id="{{employee.pk}}">{{employee.name}}</input>
					</div>
				{% endfor %}
			</div>
		
			<center>
				<input type="checkbox" class="mb-4 connected-checkbox all">Any barber</input>
			</center>

			<center><span id="datepicker" class="hide"></span></center>
			<div id="appt-list" class="mt-4"></div>


			<!-- Customer Form -->
				<div class="center mw-400 border-l-grey border-round mt-4 hide" id="customer-form">
					<h4 class="mt-3" align="center">Customer Form</h4>

					<label for="id_name" class="mt-3">Name</label>
					{{form.name|as_crispy_field}}

					
					<label for="id_email">Email Address</label>
					{{form.email|as_crispy_field}}

					<label for="phone_input">Phone Number (optional)</label><br>
					<div class="pos-rel b-8">
						<a id="phone-info" class="cursor"><small>Why do you need my phone number?</small></a>
						<p class="text-14 mt-2 info hide">We will send you a text the day before your appt.</p>
					</div>

					<div id="phone_input" class="form-group">{{form.country_code}}{{form.area_code}}{{form.number}}</div>
					<p id="phonenumber-error" class= "text-error error_message mt-3">{{ err }}</p>


					<label for="id_customer_info">Additional Info (optional)</label>
					{{form.customer_info|as_crispy_field}}

					<button type="submit" class="btn bt-color1">Schedule Appointment</button>
				</div>
			<!-- Customer Form -->

		</form>

		<!-- Urls used for Ajax request -->
			<a id="ajax-get-employees" href="{% url 'employee:ajax_get_employees' %}"></a>
			<a id="ajax-get-dates" href="{% url 'employee:ajax_get_dates' %}"></a>
			<a id="ajax-get-appts" href="{% url 'employee:ajax_get_appts' %}"></a>
		<!-- Urls used for Ajax request -->

	{% endblock body %}

	{% block javascript %}
		<script type="text/javascript" src="{% static 'employee/js/schedule.js' %}"></script>
	{% endblock %}

</body>